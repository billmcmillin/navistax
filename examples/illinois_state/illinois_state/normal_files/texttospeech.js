var ep = window.ep || {}; ep.bundles = ep.bundles || []; ep.bundles = ep.bundles.concat('bundled/texttospeech.js','texttospeech/rs_embhl_v2.js', 'ep/ep_readspeaker.js');
var rs={settings:{cookieLifetime:360000000,defaultSpeedValue:100,defaultSpeed:"medium",defaultSync:"wordsent",defaultPopup:"iconon",downloadable:"true",iframeproxyVersion:"2",reloadPage:!1,sentColor:"#beffd6",textColor:"#000000",useCloudService:!1,usePopupButton:!0,usePopupPlayer:!0,useReadspeakerIcon:!1,usePost:!0,wordColor:"#a4cbff",appserverhost:"app.readspeaker.com",domain:"readspeaker.com",subdomain:"app",region:".na",rscall:null,onclick:'readpage(this.href,"rs_popup_player"); return false;',protocol:document.location.protocol||"http:",rsent:"rsent",version:"1.1-embhl-cs-ebsco",flash:{allowScriptAccess:"always",height:"1",params:"&autoplay=1&rskin=bump&time_format=ms",popupHeight:"1",popupWidth:"1",width:"1"},imageSrc:{cloud:{arrowSrc:"/graphic/default/images/rs_embhl_arrow_small.gif",closeSrc:"/graphic/default/images/rs_player_close_13px.png",flashSrc:"/flash/readspeaker.swf",popupSrc:"/graphic/default/buttons/icon_16px.gif",settingsSrc:"/graphic/default/images/rs_embhl_wrench_13px.png",playSrc:"/graphic/default/images/rs_player_play_13px.png",playInactiveSrc:"/graphic/default/images/rs_player_play_inactive_13px.png",pauseSrc:"/graphic/default/images/rs_player_pause_13px.png",pauseInactiveSrc:"/graphic/default/images/rs_player_pause_inactive_13px.png",stopSrc:"/graphic/default/images/rs_player_stop_13px.png",stopInactiveSrc:"/graphic/default/images/rs_player_stop_inactive_13px.png",iconSrc:"/graphic/default/images/rs_player_icon_16px.gif"},media:{arrowSrc:"/images/enterprise/default/rs_arrow.gif",closeSrc:"/images/enterprise/default/close.png",flashSrc:"/flash/rplayerpro_v367_1x1.swf",popupSrc:"/images/buttons/listen_icons/icon_16px.gif",settingsSrc:"/images/enterprise/default/wrench.png",playSrc:"/images/enterprise/default/play.png",playInactiveSrc:"/images/enterprise/default/play2.png",pauseSrc:"/images/enterprise/default/pause.png",pauseInactiveSrc:"/images/enterprise/default/pause2.png",stopSrc:"/images/enterprise/default/stop.png",stopInactiveSrc:"/images/enterprise/default/stop2.png",iconSrc:"/images/buttons/listen_icons/icon_16px.gif"}}},vars:{thespeed:100,speedSetting:"",thesync:"none",newhtml:"",restoreHTML:[],readID:[],readClass:[],currentRestoreHTML:null,currentReadID:null,currentPlayerID:null,currentRSCall:null,previousPlayerID:null,previousSync:null,STATE:{CURRENT:0,NOT_READY:0,READY:1,PLAYING:2,CLOSE:3,USER_SELECTION:4,PLAYING_NO_SELECTION:5,PLAYING_USER_SELECTION:6,SETTINGS_CHANGED_PLAYING_NO_SELECTION:7,SETTINGS_CHANGED_PLAYING_USER_SELECTION:8,USER_SELECTION_WHILE_PLAYING_NO_SELECTION:9,USER_SELECTION_WHILE_PLAYING_USER_SELECTION:10},sel:{ignoreSelection:!1,selectedString:"",selhtml:"",selectedRange:null,selectedWordsRange:[],range:null,bmindex:1,sentbmindex:0,seltexttimes:0,startofsentence:1,inc:0,startNode:null,endNode:null,startOffset:null,endOffset:null,firstrun:1,globalcount:null,oldwordhl_FF:[],oldwordhlclass_FF:[],oldsenthl_FF:[],oldsenthlclass_FF:[],oldwordhlrange_IE:[],oldwordhlbackcol_IE:[],oldwordhlforecol_IE:[],oldwordhl_IE:[],oldwordhlclass_IE:[],oldsenthlrange_IE:[],oldsenthlbackcol_IE:[],oldsenthlforecol_IE:[],oldsenthl_IE:[],oldsenthlclass_IE:[],exludednodes:"table tr select option textarea ul ol dl thead tbody tfoot colgroup script map optgroup".split(" ")}},data:{browser:{name:"",flashVersion:"",version:"",OS:"",html5AudioFormat:"",html5Support:!1,html5Priority:!1},initiated:!1,params:{},images:null,userAgent:null,phrases:{closeplayer:"Close Player",fast:"Fast",hide:"Hide",highlightingoptions:"Highlighting options",listentoselectedtext:"Listen to selected text",medium:"Medium",nohighlighting:"No highlighting",nosound:"No sound?",pause:"Pause",playerwidth:"310",play:"Play",popupbutton:"Pop up button",sentonly:"Sentence only",settings:"Settings",show:"Show",slow:"Slow",speechenabled:"Speech enabled by <a href='http://www.readspeaker.com/?ref="+encodeURIComponent(document.location.href)+"' target='_blank'>ReadSpeaker</a>",speed:"Speed",stop:"Stop",volume:"Volume",wordonly:"Word only",wordsent:"Word and sentence"},saveLink:"",setLang:function(a,b){!1!=this.params.hasOwnProperty(a)&&(b&&0<b.length)&&(this.params[a]=b)},getLang:function(){return !1!==this.params.hasOwnProperty("lang")?this.params.lang:""},setParams:function(d){for(var e={},a="",c="",a="",d=d.split("?")[1].split(/[;&]/),b=0;b<d.length;b++){if((a=d[b].split("="))&&2==a.length){c=unescape(a[0]);a=unescape(a[1]);a=a.replace(/\+/g," ");if("url"==c){0==a.length&&(a=document.location.href),a=encodeURIComponent(a)}else{if("lang"==c){""!==this.getLang()&&(a=this.getLang())}else{if("speed"==c){rs.settings.defaultSpeedValue=parseInt(a);continue}else{if("speedValue"==c){rs.settings.defaultSpeed=a;continue}else{if("download"==c){rs.settings.downloadable=a;continue}}}}}e[c]=a}}e.rsjs_ver=rs.settings.version;this.params=e},setImages:function(){var d={},e="",f=rs.settings.region||".eu",b=rs.settings.useCloudService&&"https"!=rs.settings.protocol?"cloud":"media",a=rs.settings.imageSrc[b],c;for(c in a){a.hasOwnProperty(c)&&(e=-1!=a[c].indexOf("://")?"":"cloud"==b?"http://f1"+f+".readspeaker.com":rs.settings.protocol+"//media.readspeaker.com",d[c]=e+a[c])}this.images=d},setUserAgent:function(){this.userAgent=document.selection?"IE":(-1<navigator.userAgent.toLowerCase().indexOf("iphone")||-1<navigator.userAgent.toLowerCase().indexOf("ipad")||-1<navigator.userAgent.toLowerCase().indexOf("ipod"))&&-1<navigator.vendor.toLowerCase().indexOf("apple")?"IOS":-1<navigator.userAgent.toLowerCase().indexOf("CrMo")?"IOS":"OTHER"},getImage:function(a){return this.images&&this.images[a]&&void 0!==this.images[a]?this.images[a]:""},getParam:function(a){return this.params&&this.params[a]&&void 0!==this.params[a]?this.params[a]:null},getParams:function(){return this.params},getPhrase:function(a){return this.phrases&&this.phrases[a]&&void 0!==this.phrases[a]?this.phrases[a]:""},getRSCall:function(c){var c=c||{},e=rs.settings.protocol+"//"+rs.settings.appserverhost+"/cgi-bin/"+rs.settings.rsent+"?",a={},b;for(b in this.params){!1!=this.params.hasOwnProperty(b)&&(a[b]="lang"==b?this.getLang():this.params[b])}for(b in c){!1!=c.hasOwnProperty(b)&&(a[b]=c[b])}for(b in a){!1!=a.hasOwnProperty(b)&&(e="customerid"==b?e+(b+"="+a[b]):e+("&"+b+"="+a[b]))}return e},getUserAgent:function(){return this.userAgent},getSaveLink:function(){if(""===rs.data.saveLink){var a=null;if(0<rs.vars.readClass.length&&0<rs.vars.restoreHTML.length){for(var a=document.createElement("DIV"),b=0;b<rs.vars.restoreHTML.length;b++){a.innerHTML+="<div class='textToSpeechDataContainer'>"+rs.vars.restoreHTML[b]+"</div>"}a=a.innerHTML}else{null!==rs.vars.currentReadID&&(a=document.getElementById(rs.vars.currentReadID),null!==a&&(rs.vars.currentRestoreHTML=a.innerHTML)),a=rs.vars.currentRestoreHTML}rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_NO_SELECTION;b=[];b.audioformat="mp3";b.speed=rs.vars.thespeed;b.save="1";rs.data.saveLink=rs.issuePOST("<div id='"+rs.vars.currentReadID+"'>"+a+"</div>",b)+"&listen=1";rs.vars.sel.globalcount=0}return rs.data.saveLink}},_Detect:{init:function(){rs.data.browser.name=this.searchString(this.dataBrowser)||"Unknown";rs.data.browser.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown";rs.data.browser.OS=this.searchString(this.dataOS)||"Unknown";rs.data.browser.flashVersion=this.getFlashVersion();this.html5EnabledBrowsers[rs.data.browser.name]&&parseFloat(rs.data.browser.version)>=parseFloat(this.html5EnabledBrowsers[rs.data.browser.name].minver)&&(rs.data.browser.html5Support=!0,rs.data.browser.html5AudioFormat=this.html5EnabledBrowsers[rs.data.browser.name].audioFormat,rs.data.browser.html5Priority=this.html5EnabledBrowsers[rs.data.browser.name].priority)},html5EnabledBrowsers:{Chrome:{audioFormat:"mp3",minver:6,priority:!0},Explorer:{audioFormat:"mp3",minver:9,priority:!0},Firefox:{audioFormat:"ogg",minver:3.6,priority:!0},Safari:{audioFormat:"mp3",minver:5,priority:!0}},getFlashVersion:function(){try{try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{d.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(a){}return(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(c){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(b){}}return"0,0,0"},searchString:function(c){for(var e=0;e<c.length;e++){var a=c[e].string,b=c[e].prop;this.versionSearchString=c[e].versionSearch||c[e].identity;if(a){if(-1!=a.indexOf(c[e].subString)){return c[e].identity}}else{if(b){return c[e].identity}}}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b){return parseFloat(a.substring(b+this.versionSearchString.length+1))}},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},preserve:{cls:"rs_preserve",testElem:null,elementShelter:[],formShelter:[],formData:function(d,e,a,c,b){this.name=d;this.type=e;this.value=a;this.checked=c;this.selectedIndex=b;this.selectedOptions=[]},moveToShelter:function(b){var c=[],d=[],f=null,e;(e=jQuery(b).find("."+rs.preserve.cls).toArray())&&!jQuery.isArray(e)&&(e=[e]);for(var g=0,h=e.length;g<h;g++){f=e[g].cloneNode(!1),e[g].parentNode.insertBefore(f,e[g]),c.push(jQuery(e[g]).detach()[0])}b=jQuery(b).find("input, select");for(g=0;g<b.length;g++){f=new rs.preserve.formData(b[g].name,b[g].type,b[g].value,b[g].checked,b[g].selectedIndex);if("select-multiple"==b[g].type){e=b[g].options;for(var h=[],a=0;a<e.length;a++){h.push(e[a].selected)}f.selectedOptions=h}d.push(f)}rs.preserve.elementShelter.push(c);rs.preserve.formShelter.push(d)},restoreFromShelter:function(d){var e,f,b;if(rs.preserve.elementShelter.length&&(b=rs.preserve.elementShelter.shift(),b.length)){(e=jQuery(d).find("."+rs.preserve.cls).toArray())&&!jQuery.isArray(e)&&(e=[e]);for(var a=0,c=e.length;a<c;a++){f=b.shift(),e[a].parentNode.insertBefore(f,e[a]),e[a].parentNode.removeChild(e[a])}}if(rs.preserve.formShelter.length&&(d=jQuery(d).find("input, select"),e=rs.preserve.formShelter.shift(),d.length&&e.length&&d.length===e.length)){for(a=0;a<d.length;a++){if(d[a].name===e[a].name){switch(d[a].type){case"text":d[a].value=e[a].value;break;case"password":d[a].value=e[a].value;break;case"radio":!0===e[a].checked&&(d[a].checked=!0);break;case"checkbox":d[a].checked=e[a].checked;break;case"select-one":d[a].selectedIndex=e[a].selectedIndex;break;case"select-multiple":f=d[a].options;for(b=0;b<f.length;b++){f[b].selected=e[a].selectedOptions[b]}}}}}},clearShelter:function(){rs.preserve.elementShelter=[];rs.preserve.formShelter=[]}},init:function(a,b){rs.vars.currentRSCall=a;rs.vars.currentPlayerID=b;if(rs.vars.STATE.CURRENT!=rs.vars.STATE.NOT_READY){rs.data.setParams(a)}else{rs.data.setParams(a);rs.getRsentInfo();rs.getReadContent();rs.vars.sel.globalcount=0;rs.vars.currentReadID=rs.data.getParam("readid");rs.vars.thespeed=rs.convertSpeed(rs.settings.defaultSpeed);rs.vars.previousSync=rs.vars.thesync;rs.vars.thesync=rs.loadSettings("ReadSpeakerHL");if(null===rs.vars.thesync||""===rs.vars.thesync){rs.vars.thesync=rs.settings.defaultSync}rs.vars.previousPlayerID=rs.vars.currentPlayerID;rs.data.initiated=!0;rs.data.setImages();rs.vars.STATE.CURRENT=rs.vars.STATE.READY}},getRsentInfo:function(){for(var d=RegExp(".+://"+rs.settings.subdomain+"(.[a-z]{2})?."+rs.settings.domain+".+","i"),e=document.getElementsByTagName("A"),a=[],c="",b=0;b<e.length;b++){a[b]=e[b]}for(e=0;e<a.length;e++){if(a[e].getAttribute("href")&&d.test(a[e].getAttribute("href"))&&-1==a[e].className.indexOf("rsbtn_dl")){c=0<a[e].getAttribute("href").replace(d,"$1").length?a[e].getAttribute("href").replace(d,"$1"):"";rs.popup.buttonExists=!0;rs.settings.rscall=a[e].getAttribute("href");for(d=0;d<a[e].attributes.length;d++){if("onclick"==a[e].attributes[d].nodeName.toLowerCase()&&0<a[e].attributes[d].nodeValue.length&&!1==rs.settings.usePopupPlayer||"IOS"==rs.data.getUserAgent()){rs.settings.onclick=a[e].attributes[d].nodeValue}}break}}rs.settings.appserverhost=rs.settings.subdomain+c+"."+rs.settings.domain;rs.settings.region=c;rs.settings.useCloudService&&(rs.imagehost="f1"+rs.settings.region+"."+rs.settings.domain)},readpage:function(a,b){rs.vars.sel.ignoreSelection=!1;rs.init(a,b);if(!0===rs.ui.flashLinkActive){return !1}rs.start(a,b)},start:function(){if("rs_popup_player"==rs.vars.currentPlayerID){if("function"==typeof rs.ui.createPlayer){try{rs.ui.createPopupPlayer.apply()}catch(a){}}}else{if("function"==typeof rs.ui.createPlayer){try{rs.ui.createPlayer.apply()}catch(b){}}}rs.vars.sel.selectedString=""},getReadContent:function(){0<rs.getElementsByClassName("textToSpeechDataContainer","*",document.getElementById(rs.data.getParam("readid"))).length?rs.getreadclass():rs.getreadids()},getreadids:function(){if(0===rs.vars.readID.length){for(var b=document.getElementsByTagName("A"),c=0;c<b.length;c++){if(b[c].getAttribute("href")&&-1!=b[c].getAttribute("href").indexOf(rs.settings.appserverhost+"/cgi-bin/"+rs.settings.rsent)&&"rsSaveBtn"!=b[c].id&&"rs_selimg"!=b[c].id){var a=b[c].getAttribute("href").match(/readid=[^&]+/gi);a&&(a=a[0].replace("readid=",""),rs.vars.readID.push(a))}}if(0<rs.vars.readID.length){b=null;for(c=0;c<rs.vars.readID.length;c++){(b=document.getElementById(rs.vars.readID[c]))&&rs.vars.restoreHTML.push(b.innerHTML)}}}},getreadclass:function(){if(0===rs.vars.readClass.length){var a=rs.getElementsByClassName("textToSpeechDataContainer","*",document.getElementById(rs.data.getParam("readid")));rs.vars.readClass=a;if(0<rs.vars.readClass.length){for(var a=null,b=0;b<rs.vars.readClass.length;b++){(a=rs.vars.readClass[b])&&rs.vars.restoreHTML.push(a.innerHTML)}}}},getElementsByClassName:function(d,e,f){for(var d=RegExp("(^|\\s)"+d+"(\\s|$)"),e=e||"*",f=f||document,e="*"==e&&f.all?f.all:f.getElementsByTagName(e),f=[],b,a=e.length,c=0;c<a;c++){b=e[c],d.test(b.className)&&f.push(b)}return f},convertSpeed:function(a){var b={slow:rs.settings.defaultSpeedValue-25,medium:rs.settings.defaultSpeedValue,fast:rs.settings.defaultSpeedValue+25};return a&&b.hasOwnProperty(a)?b[a]:b[rs.settings.defaultSpeed]},closepage:function(){var a=document.getElementById(rs.vars.currentPlayerID);a&&(a.innerHTML="");rs.vars.STATE.CURRENT=rs.vars.STATE.CLOSE;(a=document.getElementById(rs.vars.currentReadID))&&-1<a.className.toLowerCase().indexOf("rs_reload")||rs.settings.reloadPage?setTimeout("location.reload(true);",500):setTimeout("rs.cleanup();rs.vars.currentRestoreHTML=null;",500)},rshlexit:function(a){"false"===a&&"rs-popup-player"===rs.ui.container?rs.ui.handlers.close():rs.ui.handlers.stop()},saveSettings:function(a,b,c){c=parseInt(eval(c));if("NaN"==c+""){tmpdate=""}else{var e=new Date;e.setTime(e.getTime()+c);e=e.toGMTString();tmpdate="; expires="+e}document.cookie=a+"="+escape(b)+tmpdate},loadSettings:function(a){ckarr=document.cookie;cks=ckarr.split("; ");for(i=0;i<cks.length;i++){cknameval=cks[i].split("=");for(j=0;j<cknameval.length;j++){if(cknameval[j]==a){return unescape(cknameval[j+1])}}}return""},setstyle:function(a){"slow"==a||"medium"==a||"fast"==a?(rs.vars.speedSetting=a,rs.vars.thespeed=rs.convertSpeed(a)):(rs.saveSettings("ReadSpeakerHL",a,rs.settings.cookieLifetime),rs.vars.thesync=a);a=document.getElementById("controls");null!==a&&(a.innerHTML="")},changeSettings:function(a){rs.setstyle(a);rs.ui.settingsChanged()},copyselected:function(a){rs.popup.mouseRel(a);setTimeout("rs.getSelectedHTML()",50);return !0},getSelectedHTML:function(){rs.vars.sel.selectedString="";var a=void 0,b=void 0;window.getSelection?(b=window.getSelection(),b.isCollapsed||(b.getRangeAt?a=b.getRangeAt(0):(a=document.createRange(),a.setStart(b.anchorNode,b.anchorOffset),a.setEnd(b.focusNode,b.focusOffset)),a?(DOM=a.cloneContents(),object=document.createElement("div"),object.appendChild(DOM.cloneNode(!0)),rs.vars.sel.selectedString=object.innerHTML):rs.vars.sel.selectedString=b),rs.vars.sel.range=a):document.selection?(b=document.selection,a=b.createRange(),rs.vars.sel.selectedString=a&&a.htmlText&&a.text&&0<a.text.length?a.htmlText:a&&a.text?a.text:""):document.getSelection&&(rs.vars.sel.selectedString=document.getSelection());window.getSelection?0<rs.vars.sel.selectedString.length&&window.getSelection().getRangeAt(0)&&0<window.getSelection().getRangeAt(0).toString().length?rs.popup.button():rs.vars.sel.selectedString="":rs.popup.button();0<rs.vars.sel.selectedString.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.READY?rs.vars.STATE.CURRENT=rs.vars.STATE.USER_SELECTION:0<rs.vars.sel.selectedString.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION?rs.vars.STATE.CURRENT=rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION:0<rs.vars.sel.selectedString.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION&&(rs.vars.STATE.CURRENT=rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_NO_SELECTION);rs.vars.sel.ignoreSelection=!1},cleanup:function(){if(document.selection){if(rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_NO_SELECTION){if(0<rs.vars.sel.oldwordhl_IE.length){for(var a=0;a<rs.vars.sel.oldwordhl_IE.length;a++){rs.vars.sel.oldwordhl_IE[a].className=rs.vars.sel.oldwordhlclass_IE[a]}rs.vars.sel.oldwordhlclass_IE=[];rs.vars.sel.oldwordhl_IE=[]}if(0<rs.vars.sel.oldsenthl_IE.length){for(a=0;a<rs.vars.sel.oldsenthl_IE.length;a++){rs.vars.sel.oldsenthl_IE[a].className=rs.vars.sel.oldsenthlclass_IE[a]}rs.vars.sel.oldsenthl_IE=[];rs.vars.sel.oldsenthlclass_IE=[]}}if(0<rs.vars.sel.oldwordhlrange_IE.length){for(a=0;a<rs.vars.sel.oldwordhlrange_IE.length;a++){rs.vars.sel.oldwordhlbackcol_IE[a]&&rs.vars.sel.oldwordhlforecol_IE&&(rs.vars.sel.oldwordhlrange_IE[a].execCommand("backcolor",0,rs.vars.sel.oldwordhlbackcol_IE[a]),null!==rs.vars.sel.oldwordhlforecol_IE[a]&&rs.vars.sel.oldwordhlrange_IE[a].execCommand("forecolor",0,rs.vars.sel.oldwordhlforecol_IE[a]))}rs.vars.sel.oldwordhlrange_IE=[];rs.vars.sel.oldwordhlbackcol_IE=[];rs.vars.sel.oldwordhlforecol_IE=[]}if(0<rs.vars.sel.oldsenthlrange_IE.length){for(a=0;a<rs.vars.sel.oldsenthlrange_IE.length;a++){rs.vars.sel.oldsenthlbackcol_IE[a]&&rs.vars.sel.oldsenthlforecol_IE&&(rs.vars.sel.oldsenthlrange_IE[a].execCommand("backcolor",0,rs.vars.sel.oldsenthlbackcol_IE[a]),null!==rs.vars.sel.oldsenthlforecol_IE[a]&&rs.vars.sel.oldsenthlrange_IE[a].execCommand("forecolor",0,rs.vars.sel.oldsenthlforecol_IE[a]))}rs.vars.sel.oldsenthlrange_IE=[];rs.vars.sel.oldsenthlbackcol_IE=[];rs.vars.sel.oldsenthlforecol_IE=[]}rs.vars.STATE.CURRENT!=rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION&&rs.vars.STATE.CURRENT!=rs.vars.STATE.PLAYING_USER_SELECTION&&(rs.vars.sel.selectedWordsRange=[])}else{if(rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_NO_SELECTION){for(var b=document.getElementsByTagName("RS:SPAN"),a=b.length-1;-1<a;a--){b[a].className=b[a].className.replace("sync_sent_highlighted",""),b[a].className=b[a].className.replace("sync_word_highlighted","")}b=document.getElementsByTagName("RSI:SPAN");for(a=b.length-1;-1<a;a--){b[a].className=b[a].className.replace("sync_sent_highlighted",""),b[a].className=b[a].className.replace("sync_word_highlighted","")}}if(rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION){if(0<rs.vars.sel.oldwordhl_FF.length){for(a=0;a<rs.vars.sel.oldwordhl_FF.length;a++){rs.vars.sel.oldwordhl_FF[a].className=rs.vars.sel.oldwordhlclass_FF[a]}rs.vars.sel.oldwordhlclass_FF=[];rs.vars.sel.oldwordhl_FF=[]}if(0<rs.vars.sel.oldsenthl_FF.length){for(a=0;a<rs.vars.sel.oldsenthl_FF.length;a++){rs.vars.sel.oldsenthl_FF[a].className=rs.vars.sel.oldsenthlclass_FF[a]}rs.vars.sel.oldsenthl_FF=[];rs.vars.sel.oldsenthlclass_FF=[]}}(rs.vars.STATE.CURRENT==rs.vars.STATE.CLOSE||rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION)&&rs.cleanUpSpans()}if(rs.vars.STATE.CURRENT==rs.vars.STATE.CLOSE||rs.vars.STATE.CURRENT==rs.vars.STATE.SETTINGS_CHANGED_PLAYING_NO_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION&&null!=rs.vars.restoreHTML){rs.preserve.moveToShelter(jQuery("#"+rs.vars.currentReadID));a=null;if(0<rs.vars.readClass.length){for(b=0;b<rs.vars.readClass.length;b++){if((a=rs.vars.readClass[b])&&null!==rs.vars.restoreHTML[b]){a.innerHTML=rs.vars.restoreHTML[b]}}}else{for(b=0;b<rs.vars.readID.length;b++){if((tempreadid=document.getElementById(rs.vars.readID[b]))&&null!==rs.vars.restoreHTML[b]){tempreadid.innerHTML=rs.vars.restoreHTML[b]}}}rs.preserve.restoreFromShelter(jQuery("#"+rs.vars.currentReadID));rs.ui.updateAccentOptions()}rs.vars.STATE.CURRENT==rs.vars.STATE.CLOSE&&(rs.vars.STATE.CURRENT=rs.vars.STATE.READY,rs.vars.restoreHTML=[],rs.vars.readID=[],rs.vars.readClass=[],rs.preserve.clearShelter())},issuePOST:function(b,c){rs.vars.sel.globalcount++;if(!document.getElementById("postiframe"+rs.vars.sel.globalcount)){var d=null;if(document.selection){try{d=document.createElement('<iframe name="postiframe'+rs.vars.sel.globalcount+'">')}catch(f){d=document.createElement("iframe")}}else{d=document.createElement("iframe")}d.name="postiframe"+rs.vars.sel.globalcount;d.setAttribute("id","postiframe"+rs.vars.sel.globalcount);d.setAttribute("style","display: none; position: absolute;");d.style.display="none";var e=document.getElementsByTagName("body"),g=null;0<e.length&&(g=e.item(0));if(g){g.appendChild(d)}else{return}}var d=Math.random(),e={},g=rs.data.getParams(),h;for(h in g){e[h]=g[h]}for(h in c){c.hasOwnProperty(h)&&(e[h]=c[h])}var a=document.createElement("form");a.target="postiframe"+rs.vars.sel.globalcount;a.method="post";a.action=rs.settings.protocol+"//"+rs.settings.appserverhost+"/enterprise/iframeproxy.php?rsent="+rs.settings.rsent+"&version="+rs.settings.iframeproxyVersion+"&randid="+d;for(h in e){e.hasOwnProperty(h)&&(g=document.createElement("input"),g.setAttribute("name",h),g.setAttribute("value",e[h]),a.appendChild(g))}g=document.createElement("input");g.setAttribute("name","output");g.setAttribute("value","audiolink");a.appendChild(g);g=document.createElement("input");rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION&&rs.settings.usePost?g.setAttribute("name","html_base64"):g.setAttribute("name","selectedhtml_base64");g.setAttribute("value",rs.base64.encode(b));a.appendChild(g);document.body.appendChild(a);a.submit();document.body.removeChild(a);return rs.settings.protocol+"//"+rs.settings.appserverhost+"/enterprise/iframeproxy.php?rsent="+rs.settings.rsent+"&version="+rs.settings.iframeproxyVersion+"&randid="+d},removeiFrames:function(){},rshlsetContent:function(a){rs.vars.newhtml+=a},rshlsetId:function(a){rs.vars.currentReadID=a},rshlinit:function(){if(rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION){rs.vars.sel.firstrun=1,document.selection?document.selection.empty():rs.identifyElementsReplacementNode(document.body)}else{if("none"!=rs.vars.thesync){var c=document.getElementById(rs.vars.currentReadID);if(0<rs.vars.readClass.length){var e=document.createElement("DIV");e.innerHTML=rs.vars.newhtml;var a=rs.getElementsByClassName("textToSpeechDataContainer","*",c),e=rs.getElementsByClassName("textToSpeechDataContainer","*",e);rs.preserve.moveToShelter(c);for(var b=0;b<a.length;b++){a[b].innerHTML=e[b].innerHTML}}else{rs.preserve.moveToShelter(c),c.innerHTML=rs.vars.newhtml,rs.vars.newhtml=""}rs.preserve.restoreFromShelter(c);rs.ui.updateAccentOptions()}}rs.vars.newhtml="";rs.removeiFrames()},rshlsync:function(d,e){var a=!1;0==(d&2)&&(a=0!=(d&1)?!0:!1);if(rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION||rs.vars.STATE.CURRENT==rs.vars.STATE.USER_SELECTION_WHILE_PLAYING_USER_SELECTION){if(document.selection){var c;c=rs.vars.sel.selectedWordsRange[e];if(1==rs.vars.sel.firstrun){rs.vars.sel.firstrun=0;if(rs.vars.sel.oldsenthlrange_IE&&0<rs.vars.sel.oldsenthlrange_IE.length){for(var b=0;b<rs.vars.sel.oldsenthlrange_IE.length;b++){rs.vars.sel.oldsenthlbackcol_IE[b]&&rs.vars.sel.oldsenthlforecol_IE&&(rs.vars.sel.oldsenthlrange_IE[b].execCommand("backcolor",0,rs.vars.sel.oldsenthlbackcol_IE[b]),null!==rs.vars.sel.oldsenthlforecol_IE[b]&&rs.vars.sel.oldsenthlrange_IE[b].execCommand("forecolor",0,rs.vars.sel.oldsenthlforecol_IE[b]))}rs.vars.sel.oldsenthlrange_IE=[];rs.vars.sel.oldsenthlbackcol_IE=[];rs.vars.sel.oldsenthlforecol_IE=[]}if(rs.vars.sel.selectedWordsRange&&0<rs.vars.sel.selectedWordsRange.length&&"wordsent"==rs.vars.thesync){for(b=0;b<rs.vars.sel.selectedWordsRange.length;b++){rs.vars.sel.selectedWordsRange[b]&&(rs.vars.sel.oldsenthlrange_IE.push(rs.vars.sel.selectedWordsRange[b]),rs.vars.sel.oldsenthlbackcol_IE.push(rs.vars.sel.selectedWordsRange[b].queryCommandValue("backcolor")),rs.vars.sel.oldsenthlforecol_IE.push(rs.vars.sel.selectedWordsRange[b].queryCommandValue("forecolor")),""!=rs.vars.sel.selectedWordsRange[b].text&&(rs.vars.sel.selectedWordsRange[b].execCommand("backcolor",0,rs.settings.sentColor),rs.vars.sel.selectedWordsRange[b].execCommand("forecolor",0,rs.settings.textColor)))}}}if("wordsent"==rs.vars.thesync||"sent"==rs.vars.thesync||"word"==rs.vars.thesync||""==rs.vars.thesync){if(!a&&0<rs.vars.sel.oldwordhlrange_IE.length){for(b=0;b<rs.vars.sel.oldwordhlrange_IE.length;b++){"word"==rs.vars.thesync||"sent"==rs.vars.thesync?rs.vars.sel.oldwordhlrange_IE[b].execCommand("backcolor",0,rs.vars.sel.oldwordhlbackcol_IE[b]):rs.vars.sel.oldwordhlrange_IE[b].execCommand("backcolor",0,rs.settings.sentColor),rs.vars.sel.oldwordhlrange_IE[b].execCommand("forecolor",0,rs.vars.sel.oldwordhlforecol_IE[b])}rs.vars.sel.oldwordhlrange_IE=[];rs.vars.sel.oldwordhlbackcol_IE=[];rs.vars.sel.oldwordhlforecol_IE=[]}rs.vars.sel.oldwordhlbackcol_IE.push(c.queryCommandValue("backcolor"));rs.vars.sel.oldwordhlforecol_IE.push(c.queryCommandValue("forecolor"));rs.vars.sel.oldwordhlrange_IE.push(c);"sent"==rs.vars.thesync?c.execCommand("backcolor",0,rs.settings.sentColor):c.execCommand("backcolor",0,rs.settings.wordColor);c.execCommand("forecolor",0,rs.settings.textColor)}}else{c=rs.vars.sel.selectedWordsRange["sync"+e];if(c.className.replace("word","")!=c.className){if(rs.vars.sel.oldwordhl_FF&&0<rs.vars.sel.oldwordhl_FF.length&&rs.vars.sel.oldwordhlclass_FF&&0<rs.vars.sel.oldwordhlclass_FF.length&&!a){for(b=0;b<rs.vars.sel.oldwordhl_FF.length;b++){rs.vars.sel.oldwordhl_FF[b].className=rs.vars.sel.oldwordhlclass_FF[b]}rs.vars.sel.oldwordhlclass_FF=[];rs.vars.sel.oldwordhl_FF=[]}if("wordsent"==rs.vars.thesync||"sent"==rs.vars.thesync||"word"==rs.vars.thesync||""==rs.vars.thesync){rs.vars.sel.oldwordhlclass_FF.push(c.className),rs.vars.sel.oldwordhl_FF.push(c),c.className="sent"==rs.vars.thesync?"sync_sent_highlighted":"sync_word_highlighted"}}if(1==rs.vars.sel.firstrun){rs.vars.sel.firstrun=0;if(0<rs.vars.sel.oldsenthl_FF.length){for(b=0;b<rs.vars.sel.oldsenthl_FF.length;b++){rs.vars.sel.oldsenthl_FF[b].className=rs.vars.sel.oldsenthlclass_FF[b]}rs.vars.sel.oldsenthl_FF=[];rs.vars.sel.oldsenthlclass_FF=[]}if("none"!=rs.vars.thesync&&"word"!=rs.vars.thesync&&"sent"!=rs.vars.thesync){a=rs.returnClassArraySubstring("ffsent"+rs.vars.sel.seltexttimes+" ");for(b=0;b<a.length;b++){rs.vars.sel.oldsenthl_FF[b]=a[b],rs.vars.sel.oldsenthlclass_FF[b]=rs.vars.sel.oldsenthl_FF[b].className,a[b].className="sync_sent_highlighted"}}}}}else{if(document.selection){if((c=document.getElementById("sync"+e))&&c.className.replace("word","")!=c.className){if(!a&&0<rs.vars.sel.oldwordhl_IE.length){for(b=0;b<rs.vars.sel.oldwordhl_IE.length;b++){rs.vars.sel.oldwordhl_IE[b].className=rs.vars.sel.oldwordhlclass_IE[b]}rs.vars.sel.oldwordhl_IE=[];rs.vars.sel.oldwordhlclass_IE=[]}rs.vars.sel.oldwordhlclass_IE.push(c.className);rs.vars.sel.oldwordhl_IE.push(c);c.className="sync_word_highlighted"}else{if(c&&c.className.replace("sent","")!=c.className){if(!a&&0<rs.vars.sel.oldsenthl_IE.length){for(b=0;b<rs.vars.sel.oldsenthl_IE.length;b++){rs.vars.sel.oldsenthl_IE[b].className=rs.vars.sel.oldsenthlclass_IE[b]}rs.vars.sel.oldsenthl_IE=[];rs.vars.sel.oldsenthlclass_IE=[]}rs.vars.sel.oldsenthlclass_IE.push(c.className);rs.vars.sel.oldsenthl_IE.push(c);c.className="sync_sent_highlighted"}}}else{if((c=document.getElementById("sync"+e))&&c.className.replace("word","")!=c.className){if(!a&&0<rs.vars.sel.oldwordhl_FF.length){for(b=0;b<rs.vars.sel.oldwordhl_FF.length;b++){rs.vars.sel.oldwordhl_FF[b].className=rs.vars.sel.oldwordhlclass_FF[b]}rs.vars.sel.oldwordhl_FF=[];rs.vars.sel.oldwordhlclass_FF=[]}rs.vars.sel.oldwordhlclass_FF.push(c.className);rs.vars.sel.oldwordhl_FF.push(c);c.className="sync_word_highlighted"}else{if(c&&c.className.replace("sent","")!=c.className){if(!a&&0<rs.vars.sel.oldsenthl_FF.length){for(b=0;b<rs.vars.sel.oldsenthl_FF.length;b++){rs.vars.sel.oldsenthl_FF[b].className=rs.vars.sel.oldsenthlclass_FF[b]}rs.vars.sel.oldsenthl_FF=[];rs.vars.sel.oldsenthlclass_FF=[]}rs.vars.sel.oldsenthlclass_FF.push(c.className);rs.vars.sel.oldsenthl_FF.push(c);c.className="sync_sent_highlighted"}}}}},selectRange:function(){rs.vars.sel.seltexttimes++;if(document.selection){return rs.vars.sel.selectedRange=document.selection.createRange().duplicate(),rs.selectRangeIE(rs.vars.sel.selectedRange,-1)}var a="",a=rs.vars.sel.range;rs.vars.sel.startNode=a.startContainer;rs.vars.sel.endNode=a.endContainer;rs.vars.sel.startOffset=rs.modifyOffsetStartOfWord(rs.vars.sel.startNode,a.startOffset);rs.vars.sel.endOffset=rs.modifyOffsetEndOfWord(rs.vars.sel.endNode,a.endOffset);rs.vars.sel.bmindex++;rs.vars.sel.sentbmindex=rs.vars.sel.bmindex;rs.vars.sel.bmindex++;rs.vars.sel.startofsentence=1;a=rs.rangeMarkupGecko(a.commonAncestorContainer);window.getSelection().removeAllRanges();return a},selectRangeIE:function(p){var r=p.duplicate();p.moveStart("word",-1);p.moveStart("word",1);r.isEqual(p)||p.moveStart("word",-1);r=p.duplicate();p.moveEnd("word",1);p.moveEnd("word",-1);r.isEqual(p)||p.moveEnd("word",1);var r=p.duplicate(),s=0,b="",a=1,c=p.parentElement(),e=0;r.collapse();var f=r.duplicate();f.collapse(!1);for(var h=0;p.inRange(r)&&0!=p.compareEndPoints("EndToEnd",r);){h++;s++;if(10000<s){break}r.collapse(!1);r.expand("word",1);var n="",m="",l=r.duplicate();l.collapse(!1);f.collapse(!1);if(0==f.compareEndPoints("StartToStart",l)&&0==f.compareEndPoints("EndToEnd",l)&&l.htmlText==f.htmlText){e++;if(2>e){r.move("character",1)}else{if(4>e){r.move("character",2)}else{if(6>e){r.move("word",1)}else{if(8>e){r.move("word",2)}else{if(10>e){r.move("sentence",1)}else{if(12>e){r.move("sentence",2)}else{break}}}}}}r.collapse(!1)}else{e=0;if(-1==h){return r}rs.vars.sel.selectedWordsRange[h]=r.duplicate();f=r.text;l=r.htmlText;r.collapse(!1);var q;a?(lastPos=r.duplicate(),q=rs.iterateParentTree(lastPos.parentElement(),document.body,c,0)):q=rs.iterateParentTree(r.parentElement(),lastPos.parentElement(),c,0);for(var d=rs.iterateParentTree(lastPos.parentElement(),r.parentElement(),c,0),g=r.parentElement(),k=0;k<q&&20>k;k++){g.className.match("sync_")||(n=g.outerHTML.match("<[^>]*>")[0]+n),g=g.parentElement}g=lastPos.parentElement();for(k=0;k<d&&20>k;k++){g.className.match("sync_")||(m+="</"+g.tagName+">"),g=g.parentElement}if(0!=q||0!=d){lastPos=r.duplicate()}a?(b+=n,a=0):b+=m+n;""!=l.replace("sync_sent_highlighted","")&&(b+="<rs:span class='sync_user' id='sync"+h+"'>"+f+"</rs:span>");f=r.duplicate()}}b+="<!-- f -->";d=rs.iterateParentTree(lastPos.parentElement(),document.body,c,0);g=lastPos.parentElement();for(k=0;k<d;k++){g.className.match("sync_")||(b+="</"+g.tagName+">"),g=g.parentElement}r.collapse();return b},iterateParentTree:function(d,e,a,c){for(var b=e;null!==b;){if(d==a||d==b){return c}b=b.parentElement}c++;return rs.iterateParentTree(d.parentElement,e,a,c)},rangeMarkupGecko:function(d){rs.vars.sel.firstrun=1;var e="",f=rs.vars.sel.inc;if(3==d.nodeType){e+=rs.markup(d)}else{var b,a="";if(d.hasChildNodes()){for(b=0;b<d.childNodes.length;b++){var c=d.childNodes.item(b);c==rs.vars.sel.startNode&&(rs.vars.sel.inc=1);d==rs.vars.sel.startNode&&b==rs.vars.sel.startOffset&&(rs.vars.sel.inc=1);8!=c.nodeType&&(a+=rs.rangeMarkupGecko(c));if(d==rs.vars.sel.endNode&&b==rs.vars.sel.endOffset){rs.vars.sel.inc=0;break}if(c==rs.vars.sel.endNode){rs.vars.sel.inc=0;break}}}(f||rs.vars.sel.inc)&&(!d.className||d.className.replace("sync")==d.className&&d.id.replace("sync")==d.id)?(f=document.createElement("div"),f.appendChild(d.cloneNode(!0)),tempdivtag=f.innerHTML.match("<[^>]*>"),null!==tempdivtag&&0<tempdivtag.length?(e+=tempdivtag[0],e=e+a+("</"+d.nodeName+">")):e+=a):e+=a;if(d.hasChildNodes()){for(b=0;b<d.childNodes.length;b++){if(d==rs.vars.sel.endNode&&b==rs.vars.sel.endOffset){rs.vars.sel.inc=0;break}if(c==rs.vars.sel.endNode){rs.vars.sel.inc=0;break}}}}return e.replace(/rsi:span/g,"rs:span")},markup:function(c){var d=!0,e="",g,f="",a="",b=c.nodeValue;c==rs.vars.sel.startNode&&-1!=rs.vars.sel.startOffset&&c==rs.vars.sel.endNode&&-1!=rs.vars.sel.endOffset?(f=c.nodeValue.substring(0,rs.vars.sel.startOffset),b=c.nodeValue.substring(rs.vars.sel.startOffset,rs.vars.sel.endOffset),a=c.nodeValue.substring(rs.vars.sel.endOffset),rs.vars.sel.inc=1):c==rs.vars.sel.startNode&&-1!=rs.vars.sel.startOffset?(f=c.nodeValue.substring(0,rs.vars.sel.startOffset),b=c.nodeValue.substring(rs.vars.sel.startOffset),rs.vars.sel.inc=1):c==rs.vars.sel.endNode&&-1!=rs.vars.sel.endOffset&&(b=c.nodeValue.substring(0,rs.vars.sel.endOffset),a=c.nodeValue.substring(rs.vars.sel.endOffset),rs.vars.sel.inc=1);if(!rs.vars.sel.inc){return""}for(g=0;g<rs.vars.sel.exludednodes.length;g++){if(c.parentNode&&c.parentNode.nodeName.toLowerCase()==rs.vars.sel.exludednodes[g]){d=!1;e=rs.htmlencode(b);break}}d&&(e=rs.markupSentences(rs.htmlencode(b),null));c==rs.vars.sel.endNode&&-1!=rs.vars.sel.endOffset&&(rs.vars.sel.inc=0);d&&(null!==c.parentNode&&""!=b)&&(d=rs.createreplacementnode(f+e+a,getComputedStyle(c.parentNode,null)),c.parentNode.insertBefore(d,c),c.parentNode.removeChild(c));return e},markupSentences:function(b){b=rs.splitString(b,[", ",". ","! ","? ",decodeURIComponent("%e3%80%81"),decodeURIComponent("%e3%80%82")]);if(!b){return""}for(var c="",a=0;a<b.length;a++){c+="<rsi:span class=' ffsent"+rs.vars.sel.seltexttimes+" cj"+rs.vars.sel.seltexttimes+"' ",c+="id='sync"+rs.vars.sel.sentbmindex+"'",rs.vars.sel.startofsentence=0,c+=">",c+=rs.markupWords(b[a]),c+="</rsi:span>"}return c},markupWords:function(b){b=rs.splitString(b," ");if(!b){return""}for(var c="",a=0;a<b.length;a++){c+="<rsi:span class='sync_user word ck"+rs.vars.sel.seltexttimes+"'",c+=" id='sync"+rs.vars.sel.bmindex+++"'",c+=">",c+=b[a],c+="</rsi:span>"}return c},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},htmlencode:function(a){var b=document.createElement("div"),a=document.createTextNode(a);b.appendChild(a);return b.innerHTML},identifyElementsReplacementNode:function(b){b.tagName&&("RSI:SPAN"==b.tagName&&b.id)&&(rs.vars.sel.selectedWordsRange[b.id]=b);if(b.hasChildNodes()){for(var c=0;c<b.childNodes.length;c++){var a=b.childNodes.item(c);rs.identifyElementsReplacementNode(a)}}},createreplacementnode:function(a){var b=document.createElement("rsi:span");b.innerHTML=a;b.setAttribute("class","synctemp cl"+rs.vars.sel.seltexttimes);return b},modifyOffsetStartOfWord:function(c,e){for(var a=[" ",", ",". ","! ","? ",decodeURIComponent("%e3%80%81"),decodeURIComponent("%e3%80%82")];c.nodeValue&&0!=e;){for(var b=0;b<a.length;b++){if(breakstr=a[b],0==c.nodeValue.substring(e-1).indexOf(breakstr)){return e}}e--}return e},modifyOffsetEndOfWord:function(c,e){for(var a=[" ",", ",". ","! ","? ",decodeURIComponent("%e3%80%81"),decodeURIComponent("%e3%80%82")];c.nodeValue&&e!=c.nodeValue.length;){for(var b=0;b<a.length;b++){if(breakstr=a[b],0==c.nodeValue.substring(e-1).indexOf(breakstr)){return e}}e++}return e},returnClassArraySubstring:function(c){var e=document.getElementsByTagName("*"),a=0,b=[];for(i=0;i<e.length;i++){e[i].className.replace(c,"")!=e[i].className&&(b[a]=e[i],a++)}return b},cleanUpSpans:function(){var a=document.getElementsByTagName("RSI:SPAN"),b;for(i=a.length-1;-1<i;i--){b=document.createDocumentFragment();for(j=0;j<a[i].childNodes.length;j++){b.appendChild(a[i].childNodes[j].cloneNode(!0))}a[i].parentNode.replaceChild(b,a[i])}},splitString:function(h,l){for(var a=[""],c=0,b=0;b<h.length;b++){for(var d=0;d<l.length;d++){for(var e=l[d],f=!0,g=0;g<e.length;g++){if(0>h.length-(b+g)||e[e.length-g-1]!=h[b-g-1]){f=!1;break}}f&&(c++,a[c]="")}a[c]+=h[b]}return a},popup:{buttonExists:null,firstRun:!0,mouse_y_startpos:null,mouse_x_pos:null,mouse_y_pos:null,player_x_pos:null,player_y_pos:null,time:null,viewportwidth:null,viewportheight:null,button:function(){if(rs.popup.mouse_x_pos&&rs.popup.mouse_y_pos&&0<rs.vars.sel.selectedString.length){if(!document.getElementById("rs_selimg")){if(rs.popup.buttonExists){if(!0===rs.ui.flashLinkActive){return !1}var a=document.createElement("div");a.setAttribute("id","rs_selimg");a.className="rsbtn";var b=document.createElement("a");b.setAttribute("href",rs.settings.rscall);b.setAttribute("onclick","clearTimeout(rs.popup.time);rs.popup.setVisibility();"+rs.settings.onclick);b.setAttribute("onmouseover","clearTimeout(rs.popup.time);");b.setAttribute("onmouseout","rs.popup.hideIcon();");b.className="rsbtn_play";b.onclick=new Function("clearTimeout(rs.popup.time);rs.popup.setVisibility();"+rs.settings.onclick);b.onmouseover=new Function("clearTimeout(rs.popup.time);");b.onmouseout=new Function("rs.popup.hideIcon();");b.innerHTML='<span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Listen</span></span></span><span class="rsbtn_right rsimg rsplay rspart"></span>';a.appendChild(b);b=document.createDocumentFragment();b.appendChild(a);document.body.appendChild(b)}else{rs.popup.firstRun&&(rs.getRsentInfo(),rs.popup.firstRun=!1,rs.popup.button())}}rs.popup.buttonExists&&(!1===rs.vars.sel.ignoreSelection?(a=document.getElementById("rs_selimg"),a.style.top=rs.popup.mouse_y_pos+"px",a.style.left=rs.popup.mouse_x_pos+"px",rs.popup.player_y_pos=rs.popup.mouse_y_pos+"px",rs.popup.player_x_pos=rs.popup.mouse_x_pos+"px",document.getElementById("rs-popup-player-holder")&&(document.getElementById("rs-popup-player-holder").style.opacity="0.7"),b=rs.loadSettings("ReadSpeakerHLicon"),""==b&&(b=rs.settings.usePopupButton?rs.settings.defaultPopup:"iconoff"),a.style.display="iconoff"==b?"none":"inline",rs.popup.hideIcon()):rs.vars.sel.ignoreSelection=!1)}},hideIcon:function(){rs.popup.time&&clearTimeout(rs.popup.time);rs.popup.time=setTimeout("rs.popup.setVisibility()",2500)},setVisibility:function(){document.getElementById("rs_selimg")&&(document.getElementById("rs_selimg").style.display="none");document.getElementById("rs-popup-player-holder")&&(document.getElementById("rs-popup-player-holder").style.opacity="1")},mousePress:function(a){a||(a=window.event);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();if(a.pageX||a.pageY){rs.popup.mouse_y_startpos=a.pageY}else{if(a.clientX||a.clientY){rs.popup.mouse_y_startpos=a.clientY+document.body.scrollTop+document.documentElement.scrollTop}}return !0},mouseRel:function(b){b||(b=window.event);b.cancelBubble=!0;b.stopPropagation&&b.stopPropagation();var c=null,a=null;rs.popup.getViewportSize();if(b.pageX||b.pageY){c=b.pageY,a=b.pageX}else{if(b.clientX||b.clientY){c=b.clientY+document.body.scrollTop+document.documentElement.scrollTop,a=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft}}rs.popup.mouse_y_pos=c>rs.popup.mouse_y_startpos?c+20>rs.popup.viewportheight-30?c-40:c+20:10>c-40?c+20:c-40;rs.popup.mouse_x_pos=5>a?a+30:a>rs.popup.viewportwidth-80?a-80:a+15;return !0},getViewportSize:function(){"undefined"!=typeof window.innerWidth?(rs.popup.viewportwidth=window.innerWidth+document.body.scrollLeft+document.documentElement.scrollLeft,rs.popup.viewportheight=window.innerHeight+document.body.scrollTop+document.documentElement.scrollTop):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(rs.popup.viewportwidth=document.documentElement.clientWidth+document.body.scrollLeft+document.documentElement.scrollLeft,rs.popup.viewportheight=document.documentElement.clientHeight+document.body.scrollTop+document.documentElement.scrollTop):(rs.popup.viewportwidth=document.getElementsByTagName("body")[0].clientWidth+document.body.scrollLeft+document.documentElement.scrollLeft,rs.popup.viewportheight=document.getElementsByTagName("body")[0].clientHeight+document.body.scrollTop+document.documentElement.scrollTop)}},base64:{encode:function(d){newdata=encodeURIComponent(d);for(var e=0,f=0,d=[];e<newdata.length;e++){37!=newdata.charCodeAt(e)?d[f]=newdata.charCodeAt(e):(d[f]=parseInt("0x"+newdata.charAt(e+1)+""+newdata.charAt(e+2)),e+=2),f++}e=d.length;parseInt((e+2)/3);for(var f=new String,b=parseInt(e/3),a,c=e-3*b,e=0;e<3*b;e+=3){a=rs.base64.chars(d[e]>>2),f+=a,a=rs.base64.chars((d[e]&3)<<4|d[e+1]>>4),f+=a,a=rs.base64.chars((d[e+1]&15)<<2|d[e+2]>>6),f+=a,a=rs.base64.chars(d[e+2]&63),f+=a}1==c&&(f+=rs.base64.chars(d[e]>>2),f+=rs.base64.chars((d[e]&3)<<4),f+="==");2==c&&(f+=rs.base64.chars(d[e]>>2),f+=rs.base64.chars((d[e]&3)<<4|d[e+1]>>4),f+=rs.base64.chars((d[e+1]&15)<<2),f+="=");return f},decode:function(b){for(var c="",d="",f=0,e=0,g="",h=b.length;f<h;){if(-1!=rs.base64.value(b[f])){g=b.substring(f,f+4);for(i=e=0;4>i;i++){"="==g[i]&&e++}for(i=0;i<3-e;i++){0==i?d=rs.base64.value(g[0])<<2|(rs.base64.value(g[1])&48)>>4:1==i?d=(rs.base64.value(g[1])&15)<<4|(rs.base64.value(g[2])&60)>>2:2==i&&(d=(rs.base64.value(g[2])&3)<<6|rs.base64.value(g[3]));var a=d.toString(16);1==a.length&&(a="0"+a);c+="%"+a}f+=4}else{f++}}return decodeURIComponent(c)},value:function(a){a=a.charCodeAt(0);return 65<=a&&90>=a?a-65:97<=a&&122>=a?a-97+26:48<=a&&57>=a?a-48+52:43==a?62:47==a?63:-1},chars:function(a){return 26>a?String.fromCharCode(a+65):52>a?String.fromCharCode(a+97-26):62>a?String.fromCharCode(a+48-52):62==a?"+":63==a?"/":String.fromCharCode(0)}},html5:{STATE_BEGIN:0,STATE_STOPPED:1,STATE_USER_START_NOT_READY:2,STATE_USER_START_PLAYING:3,STATE_NOT_PLAYING:4,state:0,inUse:!1,audioelement:null,lastcurrenttime:-1,currentsyncindex:0,oldbodyclass:null,lastevent:null,lastlastevent:null,lastlastlastevent:null,synclist:[],synclistindex:0,url:null,iframeurl:null,postURL:null,timer:null,postMessageData:[],init:function(){rs.PlayerAPI.releaseAdapter();var b=Math.random(),c={};c.audioformat=rs.data.browser.html5AudioFormat;c.requestgrouptype="html5iframe";c.requestgroup=b;c.speed=rs.vars.thespeed;if(rs.vars.sel.selectedString&&0<rs.vars.sel.selectedString.length||rs.vars.sel.selhtml&&0<rs.vars.sel.selhtml.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION){rs.cleanup(),!1===rs.ui.updateSettings&&(!1===rs.vars.sel.ignoreSelection&&rs.vars.sel.selectedString&&0<rs.vars.sel.selectedString.length)&&(rs.vars.sel.selhtml=rs.selectRange()),document.selection&&document.execCommand("Unselect"),rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_USER_SELECTION,c.sync="user",c.syncalignuser=rs.vars.thesync,rs.vars.sel.selectedString="",rs.html5.postURL=rs.issuePOST(rs.vars.sel.selhtml,c),rs.vars.sel.globalcount=0}else{if(rs.settings.usePost){rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_NO_SELECTION;("none"!=rs.vars.previousSync||"none"!=rs.vars.thesync)&&rs.cleanup();rs.settings.usePost&&null!==rs.vars.currentReadID&&(b=document.getElementById(rs.vars.currentReadID),null!==b&&(rs.vars.currentRestoreHTML=b.innerHTML));b=null;if(0<rs.vars.readClass.length&&0<rs.vars.restoreHTML.length){for(var b=document.createElement("DIV"),a=0;a<rs.vars.readClass.length;a++){b.innerHTML+="<div class='textToSpeechDataContainer'>"+rs.vars.restoreHTML[a]+"</div>"}b=b.innerHTML}else{b=rs.vars.currentRestoreHTML}c.sync=rs.vars.thesync;c.speed=rs.vars.thespeed;rs.html5.postURL=rs.issuePOST("<div id='"+rs.vars.currentReadID+"'>"+b+"</div>",c);rs.vars.sel.globalcount=0}}rs.vars.sel.selectedString="";"iOS"!==rs.data.browser.OS?rs.html5.timer=setTimeout(function(){rs.html5.initSyncFrame();rs.html5.initAudio();clearTimeout(rs.html5.timer)},2000):(rs.html5.initSyncFrame(),rs.html5.initAudio())},release:function(){var a=document.getElementById("synciframe");a&&(a.src="about:blank");rs.html5.synclist=[];rs.html5.synclistindex=0;rs.html5.currentsyncindex=0;rs.html5.lastcurrenttime=-1;rs.html5.url=null;rs.html5.iframeurl=null;rs.html5.posturl=null;rs.html5.postMessageData=[];rs.html5.audioelement.removeEventListener("ended",rshlexit,!1);rs.html5.audioelement=null},initAudio:function(){if(!rs.html5.url||"iOS"===rs.data.browser.OS){rs.html5.url=rs.html5.postURL+"&listen=1"}rs.html5.audioelement=new Audio(rs.html5.url);rs.html5.audioelement.setAttribute("controls","controls");rs.html5.audioelement.loop=!1;("iOS"===rs.data.browser.OS||"none"===rs.vars.thesync)&&rs.html5.audioelement.play();rs.html5.audioelement.addEventListener("ended",function(){window.rshlexit("false")},!1);rs.html5.state=rs.html5.STATE_BEGIN;rs.html5.checkState()},checkState:function(){setTimeout(function(){3===rs.html5.audioelement.networkState?rs.ui.addStatusMessage("Network error"):2===rs.html5.audioelement.networkState&&rs.html5.checkState()},750)},initSyncFrame:function(){if("none"!=rs.vars.thesync){var a=null;document.getElementById("synciframe")?a=document.getElementById("synciframe"):(a=document.createElement("iframe"),a.setAttribute("id","synciframe"));if(!rs.html5.iframeurl||"iOS"===rs.data.browser.OS){rs.html5.iframeurl=rs.html5.postURL+"sync&listen=1"}a.src=rs.html5.iframeurl;a.type="text/javascript";a.height=0;a.width=0;a.style.display="none";document.getElementById("synciframe")||document.body.appendChild(a)}else{rs.html5.state=rs.html5.STATE_USER_START_PLAYING}},runPostMessages:function(){var a=rs.html5.postMessageData,b;for(b in a){null!==a[b-1]&&"rshlsetContent"==a[b]?rshlsetContent(rs.base64.decode(a[b-1])):null!==a[b-1]&&"rshlsetId"==a[b]?rshlsetId(a[b-1]):"rshlinit"==a[b]&&(rshlinit(),rs.html5.audioelement.play(),rs.html5.refresh())}},setCurrentSyncIndex:function(){if(0<rs.html5.synclist.length&&rs.html5.synclist[rs.html5.currentsyncindex]){for(;20>=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1000*rs.html5.audioelement.currentTime;){rs.html5.currentsyncindex++}}},updateTime:function(){rs.html5.state=rs.html5.STATE_NOT_PLAYING;rs.html5.lastcurrenttime=rs.html5.audioelement.currentTime;rs.html5.currentsyncindex=0;rs.html5.setCurrentSyncIndex();rs.html5.state=rs.html5.STATE_USER_START_PLAYING},receiveMessage:function(a){a.origin.match(rs.settings.domain)&&(rs.html5.postMessageData.push(a.data),"iOS"!==rs.data.browser.OS&&"rshlfinished"==a.data&&(rs.html5.timer&&clearTimeout(rs.html5.timer),rs.html5.initSyncFrame(),rs.html5.initAudio()),-1!=a.data.indexOf("."+rs.data.browser.html5AudioFormat)?rs.html5.url=a.data:-1!=a.data.indexOf(".html5iframe")?rs.html5.iframeurl=a.data:"rshlaudio"!=a.data&&"rshlhtml5sync"!=a.data&&(null!=rs.html5.lastevent&&"rshlsetContent"==a.data?(rs.html5.synclist=[],rs.html5.synclistindex=0,rshlsetContent(rs.base64.decode(rs.html5.lastevent.data))):null!=rs.html5.lastevent&&"rshlsetId"==a.data?rshlsetId(rs.html5.lastevent.data):"rshlinit"==a.data?(rshlinit(),rs.html5.audioelement.play(),rs.html5.refresh()):null!=rs.html5.lastlastlastevent&&(null!=rs.html5.lastlastevent&&null!=rs.html5.lastevent&&"rshlsync"==a.data)&&(rs.html5.synclist[rs.html5.synclistindex]=[rs.html5.lastlastlastevent.data,rs.html5.lastlastevent.data,rs.html5.lastevent.data],rs.html5.synclistindex++),rs.html5.lastlastlastevent=rs.html5.lastlastevent,rs.html5.lastlastevent=rs.html5.lastevent,rs.html5.lastevent=a))},refresh:function(){if(rs.html5.audioelement&&rs.html5.state!=rs.html5.STATE_STOPPED){if(rs.html5.state==rs.html5.STATE_NOT_PLAYING&&setTimeout(function(){rs.html5.refresh()},200),0<rs.html5.audioelement.currentTime&&parseInt(rs.html5.lastcurrenttime)>parseInt(rs.html5.audioelement.currentTime)){rs.PlayerAPI.stop()}else{if(rs.html5.lastcurrenttime=rs.html5.audioelement.currentTime,rs.html5.state==rs.html5.STATE_BEGIN){rs.html5.audioelement.pause(),rs.html5.state=rs.html5.STATE_USER_START_NOT_READY,setTimeout("rs.html5.refresh()",0)}else{if(rs.html5.state==rs.html5.STATE_USER_START_NOT_READY){if(rs.html5.synclist[rs.html5.currentsyncindex]&&rs.html5.audioelement.buffered&&0<rs.html5.audioelement.buffered.length&&rs.html5.synclist[rs.html5.currentsyncindex][0]<1000*rs.html5.audioelement.buffered.end(rs.html5.audioelement.buffered.length-1)){rs.html5.state=rs.html5.STATE_USER_START_PLAYING,rs.html5.audioelement.play(),setTimeout("rs.html5.refresh()",0)}else{if(rs.html5.synclist[rs.html5.currentsyncindex]){if(20>=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1000*rs.html5.audioelement.currentTime){setTimeout("rs.html5.refresh()",0)}else{var a=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1000*rs.html5.audioelement.currentTime-20;75<a?setTimeout("rs.html5.refresh()",75):0>a?setTimeout("rs.html5.refresh()",0):setTimeout("rs.html5.refresh()",a)}}else{setTimeout("rs.html5.refresh()",75)}}}else{rs.html5.state==rs.html5.STATE_USER_START_PLAYING&&(rs.html5.synclist[rs.html5.currentsyncindex]&&1*rs.html5.synclist[rs.html5.currentsyncindex][0]-20<1000*rs.html5.audioelement.currentTime&&(rshlsync(rs.html5.synclist[rs.html5.currentsyncindex][1],rs.html5.synclist[rs.html5.currentsyncindex][2]),rs.html5.currentsyncindex++),rs.html5.synclist[rs.html5.currentsyncindex]?20>=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1000*rs.html5.audioelement.currentTime?setTimeout("rs.html5.refresh()",0):(a=1*rs.html5.synclist[rs.html5.currentsyncindex][0]-1000*rs.html5.audioelement.currentTime-20,75<a?setTimeout("rs.html5.refresh()",75):0>a?setTimeout("rs.html5.refresh()",0):setTimeout("rs.html5.refresh()",a)):setTimeout("rs.html5.refresh()",75))}}}}}},addEvents:function(){(-1<navigator.userAgent.toLowerCase().indexOf("iphone")||-1<navigator.userAgent.toLowerCase().indexOf("ipad")||-1<navigator.userAgent.toLowerCase().indexOf("ipod"))&&-1<navigator.vendor.toLowerCase().indexOf("apple")||-1<navigator.userAgent.toLowerCase().indexOf("android")?document.addEventListener("touchstart",function(){setTimeout(function(){rs.getSelectedHTML();return !1},50)},!1):(document.addEventListener("mousedown",function(a){setTimeout(function(){rs.popup.mousePress(a);return !1},0)},!1),document.addEventListener("keydown",function(a){setTimeout(function(){rs.popup.mousePress(a);return !1},0)},!1),document.addEventListener("mouseup",function(a){setTimeout(function(){rs.copyselected(a);return !1},0)},!1),document.addEventListener("keyup",function(a){setTimeout(function(){rs.copyselected(a);return !1},0)},!1))}};document.addEventListener?(rs.addEvents(),window.addEventListener("message",rs.html5.receiveMessage,!1,!0)):document.attachEvent?(document.attachEvent("onmousedown",rs.popup.mousePress),document.attachEvent("onkeydown",rs.popup.mousePress),document.attachEvent("onmouseup",rs.copyselected),document.attachEvent("onkeyup",rs.copyselected)):(document.onmousedown=rs.popup.mousePress,document.onkeydown=rs.popup.mousePress,document.onmouseup=rs.copyselected,document.onkeyup=rs.copyselected);function readpage(a,b){rs.readpage(a,b)}function rshlsetContent(a){rs.rshlsetContent(a)}function rshlsetId(a){rs.rshlsetId(a)}function rshlinit(){rs.rshlinit()}function rshlsync(d,e){for(var a=d.split(","),c=e.split(","),b=0;b<d.length;b++){rs.rshlsync(a[b],c[b])}}function rshlexit(a){rs.rshlexit(a)}function changeCSSRule(a,b){document.styleSheets.rsstylesheet?css=document.styleSheets.rsstylesheet:document.getElementById("rsstylesheet")&&(css=document.getElementById("rsstylesheet"));css.addRule?css.addRule(a,b):css.sheet.insertRule&&css.sheet.insertRule(a+" {"+b+"}",css.sheet.cssRules.length)}rs||(rs={});rs.html5||(rs.html5={});rs.PlayerAPI=function(){_Adapters={flash:{audioFormat:"flv",minver:8,check:function(){return rs.data.browser.flashVersion.split(",").shift()>=this.minver?!0:!1}},html5:{prioritize:!1,audioFormat:null,check:function(){return rs.data.browser.html5Support?(this.audioFormat=rs.data.browser.html5AudioFormat,this.prioritize=rs.data.browser.html5Priority,!0):!1}}};_useAdapter="";_loaded=!1;_setAdapter=function(){_useAdapter=_Adapters.html5.check()&&_Adapters.flash.check()?_Adapters.html5.prioritize?"html5":"flash":_Adapters.html5.check()?"html5":_Adapters.flash.check()?"flash":"none";"html5"==_useAdapter?(_loaded=!0,_extend(_adapterObject,rs.PlayerAPI.html5.adapter)):"flash"==_useAdapter?(_loaded=!0,_extend(_adapterObject,rs.PlayerAPI.flash.adapter)):rs.ui.showFlashLink()};_extend=function(b,c){for(var a in c){b[a]=c[a]}};return _adapterObject={init:function(){rs._Detect.init();rs.PlayerAPI.flash.init();rs.PlayerAPI.html5.init();_setAdapter()},loaded:_loaded,useAdapter:_useAdapter}}();rs.PlayerAPI.flash=function(){return{init:function(){},adapter:{playerRef:null,timerCallBack:null,timerContext:null,loadTimer:null,volume:100,play:function(){this.playerRef?!1===rs.ui.updateSettings?this.playerRef.rs_player_play():(this.initAdapter(),rs.ui.updateSettings=!1):(rs.ui.updateSettings=!1,this.initAdapter())},pause:function(){rs.PlayerAPI.getProgress(!1);this.playerRef.rs_player_pause()},stop:function(){try{this.playerRef.rs_player_stop()}catch(a){}this.getProgress(!1);rs.cleanup()},volUp:function(){this.volume=100<this.volume+20?100:this.volume+20;this.setVolume(this.volume)},volDown:function(){this.volume=0>this.volume-20?0:this.volume-20;this.setVolume(this.volume)},mute:function(){this.playerRef.rs_player_mute()},forward:function(){this.playerRef.rs_player_jumpff()},rewind:function(){this.playerRef.rs_player_jumpbb()},setVolume:function(a){rs.PlayerAPI.playerRef.setVolume(a);rs.PlayerAPI.volume=a;rs.setstyle(a)},setProgress:function(a){this.playerRef.setProgress(a)},getProgress:function(b,c,a){this.timerCallBack=c;this.timerContext=a||c;"function"==typeof rs.PlayerAPI.playerRef.getProgress?(clearTimeout(this.loadTimer),rs.PlayerAPI.playerRef.getProgress(b,"rs.PlayerAPI.timer",500)):this.loadTimer=window.setTimeout(function(){rs.PlayerAPI.getProgress(b,c,a)},500)},timer:function(a){a=a.split("|");if("function"==typeof rs.PlayerAPI.timerCallBack){try{rs.PlayerAPI.timerCallBack.apply(rs.PlayerAPI.timerContext,[a])}catch(b){}}},checkState:function(){setTimeout(function(){rs.PlayerAPI.playerRef&&(3===rs.PlayerAPI.playerRef.rs_player_networkStatus()?rs.ui.addStatusMessage("Network error"):0===rs.PlayerAPI.playerRef.rs_player_networkStatus()&&rs.PlayerAPI.checkState())},750)},initAdapter:function(){var b={};if(rs.vars.sel.selectedString&&0<rs.vars.sel.selectedString.length||rs.vars.sel.selhtml&&0<rs.vars.sel.selhtml.length&&rs.vars.STATE.CURRENT==rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION){rs.cleanup();!1===rs.ui.updateSettings&&(!1===rs.vars.sel.ignoreSelection&&rs.vars.sel.selectedString&&0<rs.vars.sel.selectedString.length)&&(rs.vars.sel.selhtml=rs.selectRange());document.selection&&document.execCommand("Unselect");rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_USER_SELECTION;b.audioformat="flv";b.speed=rs.vars.thespeed;b.sync="user";b.syncalignuser=rs.vars.thesync;var c=encodeURIComponent(rs.issuePOST(rs.vars.sel.selhtml,b)+"&listen=1");rs.vars.sel.globalcount=0}else{if(rs.settings.usePost){rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_NO_SELECTION;("none"!=rs.vars.previousSync||"none"!=rs.vars.thesync)&&rs.cleanup();rs.settings.usePost&&null!==rs.vars.currentReadID&&(c=document.getElementById(rs.vars.currentReadID),null!==c&&(rs.vars.currentRestoreHTML=c.innerHTML));c=null;if(0<rs.vars.readClass.length&&0<rs.vars.restoreHTML.length){for(var c=document.createElement("DIV"),a=0;a<rs.vars.readClass.length;a++){c.innerHTML+="<div class='textToSpeechDataContainer'>"+rs.vars.restoreHTML[a]+"</div>"}c=c.innerHTML}else{c=rs.vars.currentRestoreHTML}b.audioformat="flv";b.sync=rs.vars.thesync;b.speed=rs.vars.thespeed;c=encodeURIComponent(rs.issuePOST("<div id='"+rs.vars.currentReadID+"'>"+c+"</div>",b)+"&listen=1");rs.vars.sel.globalcount=0}else{rs.vars.STATE.CURRENT=rs.vars.STATE.PLAYING_NO_SELECTION,("none"!=rs.vars.previousSync||"none"!=rs.vars.thesync)&&rs.cleanup(),b.audioformat="flv",b.speed=rs.vars.thespeed,b.sync=rs.vars.thesync,c=encodeURIComponent(rs.data.getRSCall(b)),b={audioformat:"mp3"},b.speed=rs.vars.thespeed,b.save="1",rs.data.saveData=["normal",rs.data.getRSCall(b)]}}rs.PlayerAPI.releaseAdapter();b=document.createElement("div");a=document.createElement("object");a.id="readspeaker_flash_player";document.selection?a.setAttribute("classid","clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"):(a.setAttribute("type","application/x-shockwave-flash"),a.setAttribute("data",rs.data.getImage("flashSrc")+"?flv="+c+"&autoplay=1"));a.style.height="1px";a.style.width="1px";this.volume=rs.loadSettings("ReadSpeakerHLvolume");this.volume=""==this.volume?100:parseInt(this.volume);c=['<object id="readspeaker_flash_player" style="width: 1px; height: 1px" '+(document.selection?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"':'type="application/x-shockwave-flash" data="'+rs.data.getImage("flashSrc")+"?flv="+c+"&autoplay=1&startvol="+this.volume+'"')+">",'<param name="movie" value="'+rs.data.getImage("flashSrc")+"?flv="+c+"&autoplay=1&startvol="+this.volume+'">','<param name="quality" value="high">','<param name="autostart" value="true">','<param name="allowScriptAccess" value="'+rs.settings.flash.allowScriptAccess+'">','<param name="loop" value="false"></object>'];b.innerHTML=c.join("");b.setAttribute("style","position: fixed; bottom: 0px; right: 0px;");document.body.appendChild(b);rs.PlayerAPI.playerRef=document.getElementById("readspeaker_flash_player");rs.ui.playerActive=!0;rs.PlayerAPI.checkState()},releaseAdapter:function(){rs.PlayerAPI.playerRef&&(rs.PlayerAPI.stop(),document.body.removeChild(rs.PlayerAPI.playerRef.parentNode),rs.PlayerAPI.playerRef=null)}}}}();rs.PlayerAPI.html5=function(){return{init:function(){},adapter:{playerRef:null,timerCallBack:null,timerContext:null,volume:100,play:function(){rs.html5.audioelement?!1===rs.ui.updateSettings?(rs.html5.audioelement.play(),rs.html5.state==rs.html5.STATE_STOPPED?(rs.html5.state=rs.html5.STATE_BEGIN,rs.html5.audioelement.pause(),rs.html5.runPostMessages()):rs.html5.updateTime()):(rs.PlayerAPI.initAdapter(),rs.ui.updateSettings=!1):(rs.ui.updateSettings=!1,rs.PlayerAPI.initAdapter())},pause:function(){rs.html5.audioelement&&setTimeout(function(){rs.html5.audioelement.pause();rs.html5.state=rs.html5.STATE_NOT_PLAYING;rs.PlayerAPI.getProgress(!1)},200)},stop:function(){rs.html5.audioelement&&(rs.html5.audioelement.pause(),rs.html5.audioelement.currentTime=0,rs.html5.state=rs.html5.STATE_STOPPED,rs.html5.lastcurrenttime=-1,rs.html5.currentsyncindex=0,rs.cleanup())},volUp:function(){rs.html5.audioelement&&(this.volume=100<this.volume+20?100:this.volume+20,this.setVolume(this.volume))},volDown:function(){rs.html5.audioelement&&(this.volume=0>this.volume-20?0:this.volume-20,this.setVolume(this.volume))},mute:function(){rs.html5.audioelement&&(rs.html5.audioelement.volume=0)},forward:function(){rs.html5.audioelement&&(rs.html5.audioelement.currentTime=rs.html5.audioelement.currentTime+5<rs.html5.audioelement.duration?rs.html5.audioelement.currentTime+5:rs.html5.audioelement.duration,rs.html5.lastcurrenttime=rs.html5.audioelement.currentTime)},rewind:function(){rs.html5.audioelement&&(0<rs.html5.audioelement.currentTime-5||(rs.html5.audioelement.currentTime=0),rs.html5.audioelement.currentTime-=5,rs.html5.lastcurrenttime=rs.html5.audioelement.currentTime,rs.html5.currentsyncindex=0,rs.html5.synclistindex=0)},setVolume:function(a){if(rs.html5.audioelement){rs.PlayerAPI.volume=a;try{rs.html5.audioelement.volume=parseFloat(a/100)}catch(b){}rs.setstyle(a+"")}},setProgress:function(a){rs.html5.audioelement&&(timeInSec=a,timeInSec<rs.html5.audioelement.duration&&(rs.html5.audioelement.currentTime=timeInSec),rs.html5.lastcurrenttime=a,rs.html5.currentsyncindex=0,rs.html5.synclistindex=0)},getProgress:function(b,c,a){rs.html5.audioelement&&(!1==b?rs.html5.audioelement.removeEventListener("timeupdate",rs.PlayerAPI.timer,!1):(this.timerCallBack=c,this.timerContext=a||c,rs.html5.audioelement.addEventListener("timeupdate",rs.PlayerAPI.timer,!1)))},timer:function(){if(rs.html5.audioelement){var b=1000*parseInt(rs.html5.audioelement.currentTime),c=1000*parseInt(rs.html5.audioelement.duration),b=[b,c];if("function"==typeof rs.PlayerAPI.timerCallBack){try{rs.PlayerAPI.timerCallBack.apply(rs.PlayerAPI.timerContext,[b])}catch(a){}}}},initAdapter:function(){rs.html5.init()},releaseAdapter:function(){rs.html5.audioelement&&(rs.html5.audioelement.pause(),rs.cleanup(),rs.html5.release())}}}}();rs||(rs={});rs.ui=function(){return{addStatusMessage:function(a){var b=jQuery(rs.ui.getContainer()).find(".rsbtn_status");0===b.length&&(rs.ui.createOverlay(),b=jQuery(rs.ui.getContainer()).find(".rsbtn_status"));jQuery(b).html(a)},btns:{_play:null,_pause:null,_stop:null,_vol:null,_settings:null,_dl:null,_closer:null,_select:null,_get:function(a,b){a="_"+a;if(rs.ui.getContainer()){return this[a]=jQuery(rs.ui.getContainer()).find(b),this[a]}},play:function(){return this._get("play",".rsbtn_play")},pause:function(){return this._get("pause",".rsbtn_pause")},stop:function(){return this._get("stop",".rsbtn_stop")},vol:function(){return this._get("vol",".rsbtn_volume")},settings:function(){return this._get("settings",".rsbtn_settings")},dl:function(){return this._get("dl",".rsbtn_dl")},closer:function(){return this._get("closer",".rsbtn_closer")},select:function(){return this._get("select",".rsselect_accent")},setPlayPause:function(a){a=a?jQuery(this.pause()).attr("data-rsphrase-play"):jQuery(this.pause()).attr("data-rsphrase-pause");jQuery(this.pause()).attr("title",a);jQuery(this.pause()).find(".rsbtn_btnlabel").html(a)}},createMaximizedPlayer:function(a){!0!==rs.ui.flashLinkActive&&(rs.ui.container=a||rs.ui.container,rs.init(jQuery(rs.ui.btns.play()).attr("href"),rs.ui.container),rs.ui.injectPlayer(rs.ui.container),jQuery(rs.ui.getContainer()).removeClass("rsstopped rsplaying"),jQuery(rs.ui.getContainer()).addClass("rspaused"),rs.ui.btns.setPlayPause(!0))},createPlayer:function(){rs.ui.closeActivePlayer(void 0);rs.ui.container=rs.vars.currentPlayerID;0==jQuery(rs.ui.getContainer()).find("span.rsbtn_exp").length?rs.ui.injectPlayer():jQuery(rs.ui.getContainer()).addClass("rsexpanded");rs.ui.handlers.play()},createOverlay:function(){var a=document.createElement("span");a.className="rsbtn_overlay";a.innerHTML='<span class="rsbtn_status"></span>';jQuery(rs.ui.getContainer()).find(".rsbtn_exp").append(a)},injectPlayer:function(b){rs.ui.container=b||rs.ui.container;var b=null,c=rs.ui.playerCode,a=document.createElement("div");a.className="settings_holder";a.style.display="none";b=document.createElement("span");b.className="rsbtn_exp rsimg rspart";c=c.join("\n");c="true"===rs.settings.downloadable?c.replace("[[DOWNLOAD]]",'<a class="rsbtn_dl rsimg rsplaypart" href="javascript:void(0);" title="Download MP3"><span class="rsbtn_btnlabel">Download mp3?</span></a>'):c.replace("[[DOWNLOAD]]","");b.innerHTML=c;jQuery(rs.ui.getContainer()).append(b);jQuery(rs.ui.getContainer()).append(a);setTimeout(function(){if(phrases=rs.ui.phrases.en_us){jQuery(rs.ui.btns.pause()).attr("data-rsphrase-pause",phrases.pause),jQuery(rs.ui.btns.pause()).attr("data-rsphrase-play",phrases.play),jQuery(rs.ui.btns.pause()).attr("title",phrases.pause),jQuery(rs.ui.btns.stop()).attr("title",phrases.stop),jQuery(rs.ui.btns.vol()).attr("title",phrases.volume),jQuery(rs.ui.btns.settings()).attr("title",phrases.settings),"true"===rs.settings.downloadable&&jQuery(rs.ui.btns.dl()).attr("title",phrases.nosound),jQuery(rs.ui.btns.closer()).attr("title",phrases.closeplayer)}-1==rs.data.browser.name.indexOf("Safari")&&-1==rs.data.browser.OS.indexOf("iPhone")&&-1==navigator.userAgent.toLowerCase().indexOf("android")&&jQuery(rs.ui.getContainer()).addClass("rs-no-touch");jQuery(rs.ui.btns.stop()).on("click",function(){rs.vars.sel.ignoreSelection=!0;rs.popup.setVisibility();rs.ui.handlers.stop()});jQuery(rs.ui.btns.pause()).on("click",function(){rs.popup.setVisibility();jQuery(rs.ui.getContainer()).hasClass("rsplaying")?rs.ui.handlers.pause():(jQuery(rs.ui.getContainer()).hasClass("rsstopped")||jQuery(rs.ui.getContainer()).hasClass("rspaused"))&&rs.ui.handlers.play()});jQuery(rs.ui.btns.closer()).on("click",function(){rs.vars.sel.ignoreSelection=!0;rs.popup.setVisibility();rs.ui.handlers.close()});jQuery(rs.ui.btns.settings()).on("click",function(){rs.vars.sel.ignoreSelection=!0;rs.popup.setVisibility();rs.ui.handlers.settings()});if("true"===rs.settings.downloadable){jQuery(rs.ui.btns.dl()).on("click",function(){rs.popup.setVisibility();rs.vars.sel.ignoreSelection=!0;rs.ui.handlers.dl()})}jQuery(rs.ui.btns.select()).on("change",function(){rs.vars.sel.ignoreSelection=!0;rs.popup.setVisibility();var d=jQuery(this).val();jQuery(this).find("option").removeAttr("selected");jQuery(this).find("option[value="+d+"]").attr("selected","selected");rs.data.setLang("lang",d);rs.ui.settingsChanged()});jQuery(rs.ui.btns.select()).on("click",function(){rs.vars.sel.ignoreSelection=!0;rs.popup.setVisibility()});jQuery(rs.ui.getContainer()).addClass("rsexpanded");rs.ui.updateAccentOptions()},200)},settingsChanged:function(){!0===rs.ui.playerActive?(rs.vars.STATE.CURRENT=rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION?rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION:rs.vars.STATE.SETTINGS_CHANGED_PLAYING_NO_SELECTION,rs.PlayerAPI.initAdapter(),jQuery(rs.ui.getContainer()).removeClass("rsstopped rspaused rsplaying"),jQuery(rs.ui.getContainer()).addClass("rsplaying"),rs.ui.btns.setPlayPause(!1)):(rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_USER_SELECTION?rs.vars.STATE.CURRENT=rs.vars.STATE.SETTINGS_CHANGED_PLAYING_USER_SELECTION:rs.vars.STATE.CURRENT==rs.vars.STATE.PLAYING_NO_SELECTION&&(rs.vars.STATE.CURRENT=rs.vars.STATE.SETTINGS_CHANGED_PLAYING_NO_SELECTION),rs.ui.updateSettings=!0)},createPopupPlayer:function(){rs.ui.closeActivePlayer();rs.ui.container="rs-popup-player";var a=document.createElement("div");a.setAttribute("id","rs-popup-player-holder");a.innerHTML='<div id="rs-popup-player" class="rsbtn"><a class="rsbtn_play"><span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Listen</span></span></span><span class="rsbtn_right rsimg rsplay rspart"></span></a></div>';a.style.top=rs.popup.player_y_pos;a.style.left=rs.popup.player_x_pos;document.body.appendChild(a);clearTimeout(rs.popup.time);0==jQuery(rs.ui.getContainer()).find("span.rsbtn_exp").length?rs.ui.injectPlayer():jQuery(rs.ui.getContainer()).addClass("rsexpanded");rs.ui.handlers.play()},closeActivePlayer:function(){if(rs.ui.getContainer()){var a=jQuery(rs.ui.getContainer()).find(".settings_holder");a&&""!==a.html()&&(a.html(""),a.css("display","none"));jQuery(rs.ui.getContainer()).removeClass("rsstopped rsplaying rspaused rsexpanded");jQuery(rs.ui.getContainer()).hasClass("rsfloating")&&jQuery(rs.ui.getContainer()).removeClass("rsbtn");rs.ui.btns.setPlayPause(!0);rs.PlayerAPI.releaseAdapter();rs.cleanup();"rs-popup-player"===rs.ui.container&&rs.ui.removePopupPlayer()}},container:"readspeaker_button",getContainer:function(){return document.getElementById(rs.ui.container)},flashLinkActive:!1,playerCode:'<a class="rsbtn_pause rsimg rspart" href="javascript:void(0);" title="Pause"><span class="rsbtn_btnlabel">Pause</span></a>,<a class="rsbtn_stop rsimg rspart" href="javascript:void(0);" title="Stop"><span class="rsbtn_btnlabel">Stop</span></a>,<span class="rsbtn_player rsimg rspart">,<label for="ep_rsselect_accent" class="hidden">Select:</label>,<select id="ep_rsselect_accent" class="rsselect_accent">,<option value="en_us">American Accent</option>,<option value="en_au">Australian Accent</option>,<option value="en_uk">British Accent</option>,</select>,<a class="rsbtn_settings rsimg rsplaypart" href="javascript:void(0);" title="Settings"><span class="rsbtn_btnlabel">Settings</span></a>,[[DOWNLOAD]],</span>,<a class="rsbtn_closer rsimg rspart" href="javascript:void(0);" title="Close Player"><span class="rsbtn_btnlabel">Close</span></a>'.split(","),playerActive:!1,phrases:{en_us:{closeplayer:"Close Player",fast:"Fast",hide:"Hide",highlightingoptions:"Highlighting options",listentoselectedtext:"Listen to selected text",medium:"Medium",nohighlighting:"No highlighting",nosound:"Download mp3",pause:"Pause",playerwidth:"310",play:"Play",popupbutton:"Pop up button",sentonly:"Sentence only",settings:"Settings",show:"Show",slow:"Slow",speechenabled:'Speech enabled by <a href="http://www.readspeaker.com/?ref='+encodeURIComponent(document.location.href)+'" target="_blank">ReadSpeaker</a>',speed:"Speed",stop:"Stop",volume:"Volume",wordonly:"Word only",wordsent:"Word and sentence"},en_uk:function(){return this.en_us}},handlers:{play:function(){ep&&"function"==typeof ep.logAudioPlayback&&ep.logAudioPlayback();jQuery(rs.ui.getContainer()).removeClass("rsstopped rspaused rsplaying");jQuery(rs.ui.getContainer()).addClass("rsplaying");rs.ui.btns.setPlayPause(!1);rs.PlayerAPI.play();rs.ui.playerActive=!0},pause:function(){jQuery(rs.ui.getContainer()).removeClass("rsstopped rsplaying");jQuery(rs.ui.getContainer()).addClass("rspaused");rs.ui.btns.setPlayPause(!0);rs.PlayerAPI.pause();rs.ui.playerActive=!1},stop:function(){jQuery(rs.ui.getContainer()).removeClass("rspaused rsplaying");jQuery(rs.ui.getContainer()).addClass("rsstopped");rs.ui.btns.setPlayPause(!0);rs.PlayerAPI.stop();rs.ui.playerActive=!1},close:function(){var a=jQuery(rs.ui.getContainer()).find(".settings_holder");a&&""!==a.html()&&(a.html(""),a.css("display","none"));jQuery(rs.ui.getContainer()).removeClass("rsstopped rsplaying rspaused rsexpanded");jQuery(rs.ui.getContainer()).hasClass("rsfloating")&&jQuery(rs.ui.getContainer()).removeClass("rsbtn");rs.ui.btns.setPlayPause(!0);rs.PlayerAPI.releaseAdapter();rs.vars.STATE.CURRENT==rs.vars.STATE.CLOSE;rs.cleanup();"rs-popup-player"==rs.ui.container&&rs.ui.removePopupPlayer()},dl:function(){if("true"===rs.settings.downloadable){ep&&"function"==typeof ep.logDownload&&ep.logDownload();var d=rs.data.getSaveLink(),e=null;if(document.getElementById("dliframe")){e=document.getElementById("dliframe")}else{if(document.selection){try{e=document.createElement('<iframe name="dliframe">')}catch(a){e=document.createElement("iframe")}}else{e=document.createElement("iframe")}e.name="dliframe";e.setAttribute("id","dliframe");e.setAttribute("style","display: none; position: absolute;");e.style.display="none";var c=document.getElementsByTagName("body"),b=null;0<c.length&&(b=c.item(0));if(b){b.appendChild(e)}else{return}}e.src=d;rs.data.saveLink=""}return !1},settings:function(){rs.ui.showSettings()}},removePopupPlayer:function(){jQuery("#rs-popup-player-holder").remove()},showFlashLink:function(){var a=document.createElement("span");a.className="rs-flash-link-holder";a.innerHTML='<a class="rs-flash-link" target="_blank" href="http://get.adobe.com/flashplayer/" title="Get Adobe Flash player"><span>Get Adobe Flash player</span></a>';jQuery(rs.ui.getContainer()).append(a);rs.ui.flashLinkActive=!0},showSettings:function(){var b=jQuery(rs.ui.getContainer()).find(".settings_holder");if(b&&""!==b.html()){b.html(""),b.css("display","none")}else{b=rs.loadSettings("ReadSpeakerHL");""==b&&(b=rs.settings.defaultSync);var c=rs.vars.speedSetting;""==c&&(c=rs.settings.defaultSpeed);c=['<fieldset class="rs-block">',"<legend>Highlighting options</legend>","<ul>","<li"+("wordsent"==b?' class="rs-active"':"")+">",'<div class="rs_arrow_right"></div>','<a href="JavaScript:void(0);">Word and sentence</a>',"</li>","<li"+("sent"==b?' class="rs-active"':"")+">",'<div class="rs_arrow_right"></div>','<a href="JavaScript:void(0);">Sentence only</a>',"</li>","<li"+("word"==b?' class="rs-active"':"")+">",'<div class="rs_arrow_right"></div>','<a href="JavaScript:void(0);">Word only</a>',"</li>","<li"+("none"==b?' class="rs-active"':"")+">",'<div class="rs_arrow_right"></div>','<a href="JavaScript:void(0);">No highlighting</a>',"</li>","</ul>","</fieldset>",'<fieldset class="rs-block">',"<legend>Reading speed</legend>","<ul>","<li"+("slow"==c?' class="rs-active"':"")+">",'<div class="rs_arrow_right"></div>','<a href="JavaScript:void(0);">Slow</a>',"</li>","<li"+("medium"==c?' class="rs-active"':"")+">",'<div class="rs_arrow_right"></div>','<a href="JavaScript:void(0);">Medium</a>',"</li>","<li"+("fast"==c?' class="rs-active"':"")+">",'<div class="rs_arrow_right"></div>','<a href="JavaScript:void(0);">Fast</a>',"</li>","</ul>","</fieldset>",'<div style="clear: both;"></div>'];if(b=jQuery(rs.ui.getContainer()).find(".settings_holder")){b.html(c.join("")),b.css("display","block")}var a="wordsent sent word none slow medium fast".split(" ");jQuery(rs.ui.getContainer()).find(".settings_holder fieldset li a").each(function(d){jQuery(this).on("click",function(){rs.changeSettings(a[d]);var e=jQuery(rs.ui.getContainer()).find(".settings_holder");e&&""!==e.html()&&(e.html(""),e.css("display","none"));return !1})})}},updateSettings:!1,updateAccentOptions:function(){var a=rs.data.getLang();jQuery(rs.ui.btns.select()).find("option").removeAttr("selected");jQuery(rs.ui.btns.select()).find("option[value="+a+"]").attr("selected","selected")}}}();(function(h,f,e){var g={placeholderSelector:"div.rs-placeholder",accentMappings:{ScanSoft_Daniel_Full_22kHz:"en_uk",ScanSoft_Jill_Full_22kHz:"en_us",ScanSoft_Karen_Full_22kHz:"en_au"},encodeFileName:function(d){if(d.length!==1){return""}var b=d.data("text-to-speech-title").replace(/(([^\s]+\s\s*){5})(.*)/,"$1").replace(/ +$/,""),c=d.data("text-to-speech-author"),j=""+d.data("text-to-speech-additional-filename"),a=(b+(c.length>0?"-"+c:"")+(j.length>0?"-"+j:"")).replace(/[^\w\-]/g,"");return encodeURIComponent(a)},setupFullTextDiv:function(b){var a=h(".full-text-container"),c="rs_full_text_container_title";if(a.length===1){a.find(".ft-title").addClass("textToSpeechDataContainer");a.attr("id",a.id?a.id:c);b=a.attr("id")}return b},setup:function(){if(typeof e==="undefined"){return}var b=h(this.placeholderSelector),a=h(".record-type.audio-link");if(b.length>0&&a.length===0){b.each(function(){var r=h(this),c,u,x,y,d,z,v,t,w,s=h("#"+r.data("parent"));if(f.interfaceId&&f.interfaceId==="ell"){s=h(b[0])}if(s.length>0){c=r.data("readid");c=g.setupFullTextDiv(c);x=r.data("server");y=r.data("speed").toLowerCase();t=r.data("imagepath");d=g.accentMappings[r.data("voice")]||"en_us";z=(r.data("download")||false)&&h("div.full-text-container").length>0;w=r.data("isdetail");v=g.encodeFileName(h("section#TextToSpeech"));if(h("#"+c).length===0){c=h("div#innerContainer").attr("id");h(":hidden,.submenu,.hidden,iframe").addClass("rs_skip")}u=h('<div class="readspeakerContainer rs_skip rs_preserve"><div id="readspeaker_button" class="rsbtn"><a class="rsbtn_play" id="readspeaker_link" accesskey="L" onclick="readpage(this.href, \'readspeaker_button\'); return false;" href="'+x+"&amp;lang="+d+"&amp;readid="+c+"&amp;url="+encodeURIComponent(window.location.href)+"&amp;speedValue="+y+"&amp;download="+z+(v.length>0?"&audiofilename="+v:"")+'"><span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Listen</span></span></span><span class="rsbtn_right rsimg rsplay rspart"></span></a></div></div>');s.append(u).show();r.show();e.settings.usePost=true;e.settings.imageSrc.media.flashSrc=t+"flash/rplayerpro_v367_1x1.swf";f.logDownload=function(){h.ajax({url:f.utilities.buildAjaxRequestPath("TextToSpeech/LogAudioDownload")})};if(w===true){f.logAudioPlayback=function(){h.ajax({url:f.utilities.buildAjaxRequestPath("TextToSpeech/LogAudioReading")})}}}})}}};h(document).ready(function(){var a=(navigator.appVersion.indexOf("MSIE")!==-1)?true:false;var b=(a)?800:200;g.setup();h("#readspeaker_button").hide();setTimeout(function(){e.settings.subdomain="app.rs";e.settings.domain="ebscohost.com";e.PlayerAPI.init();e.ui.createMaximizedPlayer();h("#readspeaker_button").show();if(h(".rs-flash-link").length>0){h(".readspeakerContainer").addClass("noflash")}},b)});if(typeof define==="function"&&define.amd){define("epreadspeaker",[],function(){return g})}}(jQuery,ep,rs));